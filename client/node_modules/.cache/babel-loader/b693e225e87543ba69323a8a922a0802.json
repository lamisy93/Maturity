{"ast":null,"code":"import _slicedToArray from \"/home/aminata/Downloads/BACK-FRONT/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/home/aminata/Downloads/BACK-FRONT/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/aminata/Downloads/BACK-FRONT/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/aminata/Downloads/BACK-FRONT/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/aminata/Downloads/BACK-FRONT/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/aminata/Downloads/BACK-FRONT/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/aminata/Downloads/BACK-FRONT/client/src/components/FeaturesTeam/FeaturesTeamCampaign/FeaturesTeamCampaign.js\";\nimport React, { Component, Fragment } from \"react\";\nimport \"./FeaturesTeamCampaign.scss\";\nimport { Link } from \"react-router-dom\";\n\nvar FeaturesTeamCampaign =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FeaturesTeamCampaign, _Component);\n\n  function FeaturesTeamCampaign(props) {\n    var _this;\n\n    _classCallCheck(this, FeaturesTeamCampaign);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FeaturesTeamCampaign).call(this, props));\n\n    _this.componentDidMount = function () {\n      Promise.all([fetch(\"/api/v1/campaign/getfeaturesTeam\"), fetch(\"/api/v1/campaign\")]).then(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            res1 = _ref2[0],\n            res2 = _ref2[1];\n\n        return Promise.all([res1.json(), res2.json()]);\n      }).then(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n            data1 = _ref4[0],\n            data2 = _ref4[1];\n\n        return _this.setState({\n          featuresTeam: data1,\n          campaign: data2\n        });\n      });\n    };\n\n    _this.getCampaignInProgress = function (ftId) {\n      var data = [];\n\n      for (var i = 0; i < _this.state.campaign.length; i++) {\n        if (_this.state.campaign[i].ft_id === parseInt(ftId) && _this.state.campaign[i].state === 0) {\n          data.push(_this.state.campaign[i]); // let state = this.state.campaign[i].state;\n          // return state = \"En cours\";\n        }\n      }\n\n      return data.map(function (campaign, key) {\n        var state;\n\n        if (campaign.state === 0) {\n          state = \"en cours\";\n        } else if (campaign.state === 1) {\n          state = \"Terminée\";\n        } else {\n          state = \"Aucune campagne\";\n        }\n\n        return React.createElement(\"div\", {\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, \"Campagne \\\"\", campaign.namecamp, \"\\\" \", state, \" r\\xE9alis\\xE9e le \", campaign.date);\n      });\n    };\n\n    _this.getCampaignsFinish = function (ftId) {\n      var data = [];\n\n      for (var i = 0; i < _this.state.campaign.length; i++) {\n        if (_this.state.campaign[i].ft_id === parseInt(ftId) && _this.state.campaign[i].state === 1) {\n          data.push(_this.state.campaign[i]);\n        }\n      }\n\n      return data.map(function (campaign, key) {\n        var state;\n\n        if (campaign.state === 0) {\n          state = \"en cours\";\n        } else if (campaign.state === 1) {\n          state = \"terminée\";\n        } else {\n          state = \"Aucune campagne\";\n        }\n\n        return React.createElement(\"div\", {\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, \"Campagne \", campaign.namecamp, \" \", state, \" r\\xE9alis\\xE9e le \", campaign.date);\n      });\n    };\n\n    sessionStorage.setItem(\"ft-id\", props.match.params.teamId);\n    sessionStorage.setItem(\"ft-name\", props.match.params.teamName);\n    _this.Name = sessionStorage.getItem(\"ft-name\");\n    _this.Id = sessionStorage.getItem(\"ft-id\");\n    _this.state = {\n      name: \"\",\n      featuresTeam: [],\n      campaign: []\n    };\n    return _this;\n  }\n\n  _createClass(FeaturesTeamCampaign, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var ftCampaigns = this.state.campaign.filter(function (campaign) {\n        return campaign.ft_id === parseInt(_this2.Id);\n      });\n\n      if (ftCampaigns.length === 0) {\n        console.log(ftCampaigns.length);\n        return React.createElement(Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          alt: \"\",\n          src: require(\"../../../../src/noCampaign.png\"),\n          width: \"800\",\n          height: \"700\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          className: \"aucune\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, \"Aucune campagne enregistr\\xE9e.\"));\n      } else {\n        console.log(ftCampaigns.length);\n        return React.createElement(\"div\", {\n          className: \"ft-campaign\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fas fa-bars ham\",\n          alt: \"#\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        })), React.createElement(\"h1\", {\n          className: \"titre\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, \"Historique des campagnes\"), React.createElement(\"hr\", {\n          className: \"statut\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"statut\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"cours\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        }, \"Campagne en cours\"), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }, this.getCampaignInProgress(this.Id)), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }), React.createElement(\"i\", {\n          className: \"fas fa-spinner\",\n          style: {\n            fontSize: \"50px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"termine\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: {\n            pathname: \"/Result/\".concat(this.Name, \"/\").concat(this.Id)\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"A\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"termine\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, \"Campagne termin\\xE9e\", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          style: {\n            color: \"black\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, this.Name, React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }), \"25/06/2018\")), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, this.getCampaignsFinish(this.Id)), React.createElement(\"i\", {\n          className: \"far fa-check-circle validate \",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }))), React.createElement(Link, {\n          to: {\n            pathname: \"/Result/\".concat(this.Name, \"/\").concat(this.Id)\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"B\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"termine\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, \"Campagne termin\\xE9e\", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          style: {\n            color: \"black\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }, this.Name, React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }), \"23/03/2018\")), React.createElement(\"i\", {\n          className: \"far fa-check-circle validate\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }))))));\n      }\n    }\n  }]);\n\n  return FeaturesTeamCampaign;\n}(Component);\n\nexport { FeaturesTeamCampaign as default };","map":{"version":3,"sources":["/home/aminata/Downloads/BACK-FRONT/client/src/components/FeaturesTeam/FeaturesTeamCampaign/FeaturesTeamCampaign.js"],"names":["React","Component","Fragment","Link","FeaturesTeamCampaign","props","componentDidMount","Promise","all","fetch","then","res1","res2","json","data1","data2","setState","featuresTeam","campaign","getCampaignInProgress","ftId","data","i","state","length","ft_id","parseInt","push","map","key","namecamp","date","getCampaignsFinish","sessionStorage","setItem","match","params","teamId","teamName","Name","getItem","Id","name","ftCampaigns","filter","console","log","require","fontSize","pathname","color"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\r\nimport \"./FeaturesTeamCampaign.scss\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class FeaturesTeamCampaign extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    sessionStorage.setItem(\"ft-id\", props.match.params.teamId);\r\n    sessionStorage.setItem(\"ft-name\", props.match.params.teamName);\r\n    this.Name = sessionStorage.getItem(\"ft-name\");\r\n    this.Id = sessionStorage.getItem(\"ft-id\");\r\n\r\n    this.state = {\r\n      name: \"\",\r\n      featuresTeam: [],\r\n      campaign: []\r\n    };\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    Promise.all([\r\n      fetch(\"/api/v1/campaign/getfeaturesTeam\"),\r\n      fetch(\"/api/v1/campaign\")\r\n    ])\r\n      .then(([res1, res2]) => Promise.all([res1.json(), res2.json()]))\r\n      .then(([data1, data2]) =>\r\n        this.setState({\r\n          featuresTeam: data1,\r\n          campaign: data2\r\n        })\r\n      );\r\n  };\r\n\r\n  getCampaignInProgress = ftId => {\r\n    const data = [];\r\n    for (let i = 0; i < this.state.campaign.length; i++) {\r\n      if (\r\n        this.state.campaign[i].ft_id === parseInt(ftId) &&\r\n        this.state.campaign[i].state === 0\r\n      ) {\r\n        data.push(this.state.campaign[i]);\r\n        // let state = this.state.campaign[i].state;\r\n        // return state = \"En cours\";\r\n      }\r\n    }\r\n\r\n    return data.map((campaign, key) => {\r\n      let state;\r\n      if (campaign.state === 0) {\r\n        state = \"en cours\";\r\n      } else if (campaign.state === 1) {\r\n        state = \"Terminée\";\r\n      } else {\r\n        state = \"Aucune campagne\";\r\n      }\r\n      return (\r\n        <div key={key}>\r\n          Campagne \"{campaign.namecamp}\" {state} réalisée le {campaign.date}\r\n        </div>\r\n      );\r\n    });\r\n  };\r\n\r\n  getCampaignsFinish = ftId => {\r\n    const data = [];\r\n    for (let i = 0; i < this.state.campaign.length; i++) {\r\n      if (\r\n        this.state.campaign[i].ft_id === parseInt(ftId) &&\r\n        this.state.campaign[i].state === 1\r\n      ) {\r\n        data.push(this.state.campaign[i]);\r\n      }\r\n    }\r\n\r\n    return data.map((campaign, key) => {\r\n      let state;\r\n      if (campaign.state === 0) {\r\n        state = \"en cours\";\r\n      } else if (campaign.state === 1) {\r\n        state = \"terminée\";\r\n      } else {\r\n        state = \"Aucune campagne\";\r\n      }\r\n      return (\r\n        <div key={key}>\r\n          Campagne {campaign.namecamp} {state} réalisée le {campaign.date}\r\n        </div>\r\n      );\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const ftCampaigns = this.state.campaign.filter(\r\n      campaign => campaign.ft_id === parseInt(this.Id)\r\n    );\r\n    if (ftCampaigns.length === 0) {\r\n      console.log(ftCampaigns.length);\r\n      return (\r\n        <Fragment>\r\n          <img\r\n            alt=\"\"\r\n            src={require(\"../../../../src/noCampaign.png\")}\r\n            width=\"800\"\r\n            height=\"700\"\r\n          />\r\n          <p className=\"aucune\">Aucune campagne enregistrée.</p>\r\n        </Fragment>\r\n      );\r\n    } else {\r\n      console.log(ftCampaigns.length);\r\n      return (\r\n        <div className=\"ft-campaign\">\r\n          <a href=\"/\">\r\n            <i className=\"fas fa-bars ham\" alt=\"#\" />\r\n          </a>\r\n          <h1 className=\"titre\">Historique des campagnes</h1>\r\n          <hr className=\"statut\" />\r\n\r\n          <div className=\"statut\">\r\n            <div className=\"cours\">\r\n              <p>Campagne en cours</p>\r\n              <br />\r\n              <div>{this.getCampaignInProgress(this.Id)}</div>\r\n              <br />\r\n              <i className=\"fas fa-spinner\" style={{ fontSize: \"50px\" }} />\r\n            </div>\r\n\r\n            <div className=\"termine\">\r\n              <Link to={{ pathname: `/Result/${this.Name}/${this.Id}` }}>\r\n                <div className=\"A\">\r\n                  <p className=\"termine\">\r\n                    Campagne terminée\r\n                    <br />\r\n                    <span style={{ color: \"black\" }}>\r\n                      {this.Name}\r\n                      <br />\r\n                      25/06/2018\r\n                    </span>\r\n                  </p>\r\n                  <div>{this.getCampaignsFinish(this.Id)}</div>\r\n                  <i className=\"far fa-check-circle validate \" />\r\n                </div>\r\n              </Link>\r\n\r\n              <Link to={{ pathname: `/Result/${this.Name}/${this.Id}` }}>\r\n                <div className=\"B\">\r\n                  <p className=\"termine\">\r\n                    Campagne terminée\r\n                    <br />\r\n                    <span style={{ color: \"black\" }}>\r\n                      {this.Name}\r\n                      <br />\r\n                      23/03/2018\r\n                    </span>\r\n                  </p>\r\n                  <i className=\"far fa-check-circle validate\" />\r\n                </div>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}